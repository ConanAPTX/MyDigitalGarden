---
{"number headings":"auto, first-level 4, max 6, contents
{ #toc}
, start-at 1, _.1.1","dg-publish":true,"permalink":"/15_OceanBase/03_OceanBase 高阶进阶/事务管理/OceanBase 全局时间戳/","dgPassFrontmatter":true}
---


### 文档名称
#### 1 OceanBase 全局一致性快照技术

OceanBase 数据库是利用一个集中式服务来提供全局一致的版本号；

事务在修改数据或者查询数据的时候，无论请求源自哪台物理机器，都会从这个集中式的服务处获取版本号，OceanBase 则保证所有的版本号单调向前并且和真实世界的时间顺序保持一致；
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="331.00000000000006px" width="541.0000000000001px" viewBox="-10 -10 561.0000000000001 351.00000000000006" content="&lt;mxGraphModel dx=&quot;1228&quot; dy=&quot;941&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;0&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&lt;root&gt;&lt;mxCell id=&quot;0&quot;/&gt;&lt;mxCell id=&quot;168&quot; value=&quot;00&quot; style=&quot;locked=1;&quot; parent=&quot;0&quot;/&gt;&lt;mxCell id=&quot;182&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#bac8d3;strokeColor=#23445d;&quot; vertex=&quot;1&quot; parent=&quot;168&quot;&gt;&lt;mxGeometry x=&quot;-110&quot; y=&quot;-33&quot; width=&quot;540&quot; height=&quot;330&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;3&quot; value=&quot;&amp;lt;div&amp;gt;&amp;lt;span style=&amp;quot;font-size: 18pt ; font-family: &amp;amp;#34;alibabapuhuiti_2_85_bold&amp;amp;#34; ; color: rgb(58 , 54 , 54) ; font-weight: bold&amp;quot;&amp;gt;OceanBase数据库集群&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;&quot; parent=&quot;168&quot; vertex=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;25&quot; y=&quot;-33&quot; width=&quot;270&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;1&quot; value=&quot;01&quot; style=&quot;locked=1;&quot; parent=&quot;0&quot;/&gt;&lt;mxCell id=&quot;5&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;105&quot; y=&quot;30&quot; width=&quot;120&quot; height=&quot;60&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;6&quot; value=&quot;&amp;lt;div style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-family: &amp;amp;#34;alibabapuhuiti_2_85_bold&amp;amp;#34; ; color: rgb(255 , 255 , 255) ; font-weight: bold&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;全局时间戳服务&amp;lt;br&amp;gt;&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-family: &amp;amp;#34;alibabapuhuiti_2_85_bold&amp;amp;#34; ; color: rgb(255 , 255 , 255) ; font-weight: bold&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;（GTS）&amp;lt;br&amp;gt;&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-family: &amp;amp;#34;alibabapuhuiti_2_85_bold&amp;amp;#34; ; color: rgb(255 , 255 , 255) ; font-weight: bold&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;For 租户1&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;105&quot; y=&quot;50&quot; width=&quot;117.5&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;8&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;fontColor=#ffffff;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;105&quot; y=&quot;110&quot; width=&quot;120&quot; height=&quot;60&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;9&quot; value=&quot;&amp;lt;div style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-family: &amp;amp;#34;alibabapuhuiti_2_85_bold&amp;amp;#34; ; color: rgb(255 , 255 , 255) ; font-weight: bold&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;全局时间戳服务&amp;lt;br&amp;gt;&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-family: &amp;amp;#34;alibabapuhuiti_2_85_bold&amp;amp;#34; ; color: rgb(255 , 255 , 255) ; font-weight: bold&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;（GTS）&amp;lt;br&amp;gt;&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-family: &amp;amp;#34;alibabapuhuiti_2_85_bold&amp;amp;#34; ; color: rgb(255 , 255 , 255) ; font-weight: bold&amp;quot;&amp;gt;&amp;lt;font style=&amp;quot;font-size: 13px&amp;quot;&amp;gt;For 租户2&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;105&quot; y=&quot;130&quot; width=&quot;117.5&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;10&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontColor=#ffffff;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;-30&quot; y=&quot;190&quot; width=&quot;60&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;72&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;194&quot; y=&quot;190&quot; width=&quot;60&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;73&quot; value=&quot;&amp;lt;div style=&amp;quot;font-size: 9px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 9px; font-family: alibabapuhuiti_2_85_bold; color: rgb(58, 54, 54); font-weight: bold;&amp;quot;&amp;gt;机器1&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;209&quot; y=&quot;190&quot; width=&quot;30&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;74&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;78&quot; y=&quot;190&quot; width=&quot;60&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;77&quot; value=&quot;&amp;lt;div style=&amp;quot;font-size: 9px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 9px; font-family: alibabapuhuiti_2_85_bold; color: rgb(58, 54, 54); font-weight: bold;&amp;quot;&amp;gt;机器1&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;93&quot; y=&quot;190&quot; width=&quot;30&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;80&quot; value=&quot;&amp;lt;div style=&amp;quot;font-size: 9px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 9px; font-family: alibabapuhuiti_2_85_bold; color: rgb(58, 54, 54); font-weight: bold;&amp;quot;&amp;gt;机器1&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;-15&quot; y=&quot;190&quot; width=&quot;30&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;84&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;300&quot; y=&quot;190&quot; width=&quot;60&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;85&quot; value=&quot;&amp;lt;div style=&amp;quot;font-size: 9px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 9px; font-family: alibabapuhuiti_2_85_bold; color: rgb(58, 54, 54); font-weight: bold;&amp;quot;&amp;gt;机器1&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;315&quot; y=&quot;190&quot; width=&quot;30&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;117&quot; value=&quot;_3&quot; style=&quot;locked=1;&quot; parent=&quot;0&quot;/&gt;&lt;mxCell id=&quot;124&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;-30&quot; y=&quot;190&quot; width=&quot;60&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;130&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;194&quot; y=&quot;190&quot; width=&quot;60&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;131&quot; value=&quot;&amp;lt;div style=&amp;quot;font-size: 9px&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 9px ; font-family: &amp;amp;#34;alibabapuhuiti_2_85_bold&amp;amp;#34; ; color: rgb(58 , 54 , 54) ; font-weight: bold&amp;quot;&amp;gt;....&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;209&quot; y=&quot;190&quot; width=&quot;30&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;132&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;78&quot; y=&quot;190&quot; width=&quot;60&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;133&quot; value=&quot;&amp;lt;div style=&amp;quot;font-size: 9px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 9px; font-family: alibabapuhuiti_2_85_bold; color: rgb(58, 54, 54); font-weight: bold;&amp;quot;&amp;gt;机器1&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;93&quot; y=&quot;190&quot; width=&quot;30&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;134&quot; value=&quot;&amp;lt;div style=&amp;quot;font-size: 9px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 9px; font-family: alibabapuhuiti_2_85_bold; color: rgb(58, 54, 54); font-weight: bold;&amp;quot;&amp;gt;机器1&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;-15&quot; y=&quot;190&quot; width=&quot;30&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;136&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;300&quot; y=&quot;190&quot; width=&quot;60&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;137&quot; value=&quot;&amp;lt;div style=&amp;quot;font-size: 9px;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;font-size: 9px; font-family: alibabapuhuiti_2_85_bold; color: rgb(58, 54, 54); font-weight: bold;&amp;quot;&amp;gt;机器1&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;315&quot; y=&quot;190&quot; width=&quot;30&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;138&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;-20&quot; y=&quot;210&quot; width=&quot;40&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;139&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;-20&quot; y=&quot;240&quot; width=&quot;40&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;141&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;88&quot; y=&quot;210&quot; width=&quot;40&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;142&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;88&quot; y=&quot;240&quot; width=&quot;40&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;143&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;204&quot; y=&quot;210&quot; width=&quot;40&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;144&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;204&quot; y=&quot;240&quot; width=&quot;40&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;145&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;310&quot; y=&quot;210&quot; width=&quot;40&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;146&quot; value=&quot;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;fontColor=#ffffff;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;310&quot; y=&quot;240&quot; width=&quot;40&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;147&quot; value=&quot;租户 1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;-20&quot; y=&quot;212&quot; width=&quot;40&quot; height=&quot;18&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;148&quot; value=&quot;租户 2&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;-20&quot; y=&quot;240&quot; width=&quot;40&quot; height=&quot;22&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;149&quot; value=&quot;租户 1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;88&quot; y=&quot;212&quot; width=&quot;40&quot; height=&quot;18&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;150&quot; value=&quot;租户 2&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;88&quot; y=&quot;240&quot; width=&quot;40&quot; height=&quot;22&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;153&quot; value=&quot;租户 1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;-20&quot; y=&quot;212&quot; width=&quot;40&quot; height=&quot;18&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;154&quot; value=&quot;租户 2&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;204&quot; y=&quot;240&quot; width=&quot;40&quot; height=&quot;22&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;155&quot; value=&quot;租户 1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;204&quot; y=&quot;212&quot; width=&quot;40&quot; height=&quot;18&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;156&quot; value=&quot;租户 2&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;310&quot; y=&quot;238&quot; width=&quot;40&quot; height=&quot;22&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;157&quot; value=&quot;租户 1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;117&quot;&gt;&lt;mxGeometry x=&quot;310&quot; y=&quot;210&quot; width=&quot;40&quot; height=&quot;18&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;184&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;fontSize=10;strokeWidth=2;fillColor=#60a917;strokeColor=#2D7600;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;&quot; edge=&quot;1&quot; parent=&quot;117&quot; source=&quot;153&quot; target=&quot;6&quot;&gt;&lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&lt;mxPoint x=&quot;40&quot; y=&quot;230&quot; as=&quot;sourcePoint&quot;/&gt;&lt;mxPoint x=&quot;90&quot; y=&quot;180&quot; as=&quot;targetPoint&quot;/&gt;&lt;Array as=&quot;points&quot;&gt;&lt;mxPoint x=&quot;-50&quot; y=&quot;221&quot;/&gt;&lt;mxPoint x=&quot;-50&quot; y=&quot;55&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;190&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;fontSize=10;strokeWidth=2;fillColor=#60a917;strokeColor=#2D7600;exitX=0;exitY=0.5;exitDx=0;exitDy=0;&quot; edge=&quot;1&quot; parent=&quot;117&quot; source=&quot;149&quot;&gt;&lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&lt;mxPoint x=&quot;70&quot; y=&quot;206&quot; as=&quot;sourcePoint&quot;/&gt;&lt;mxPoint x=&quot;70&quot; y=&quot;56&quot; as=&quot;targetPoint&quot;/&gt;&lt;Array as=&quot;points&quot;&gt;&lt;mxPoint x=&quot;70&quot; y=&quot;221&quot;/&gt;&lt;mxPoint x=&quot;70&quot; y=&quot;180&quot;/&gt;&lt;mxPoint x=&quot;70&quot; y=&quot;136&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;193&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;fontSize=10;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#60a917;strokeColor=#2D7600;entryX=1;entryY=0.25;entryDx=0;entryDy=0;&quot; edge=&quot;1&quot; parent=&quot;117&quot; source=&quot;157&quot; target=&quot;6&quot;&gt;&lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&lt;mxPoint x=&quot;380&quot; y=&quot;270&quot; as=&quot;sourcePoint&quot;/&gt;&lt;mxPoint x=&quot;430&quot; y=&quot;220&quot; as=&quot;targetPoint&quot;/&gt;&lt;Array as=&quot;points&quot;&gt;&lt;mxPoint x=&quot;380&quot; y=&quot;219&quot;/&gt;&lt;mxPoint x=&quot;380&quot; y=&quot;55&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;194&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;fontSize=10;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#60a917;strokeColor=#2D7600;&quot; edge=&quot;1&quot; parent=&quot;117&quot; source=&quot;155&quot;&gt;&lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&lt;mxPoint x=&quot;310&quot; y=&quot;223&quot; as=&quot;sourcePoint&quot;/&gt;&lt;mxPoint x=&quot;260&quot; y=&quot;54&quot; as=&quot;targetPoint&quot;/&gt;&lt;Array as=&quot;points&quot;&gt;&lt;mxPoint x=&quot;260&quot; y=&quot;223&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;195&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;fontSize=10;strokeWidth=2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fillColor=#008a00;strokeColor=#005700;&quot; edge=&quot;1&quot; parent=&quot;117&quot; source=&quot;148&quot; target=&quot;9&quot;&gt;&lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&lt;mxPoint x=&quot;170&quot; y=&quot;230&quot; as=&quot;sourcePoint&quot;/&gt;&lt;mxPoint x=&quot;220&quot; y=&quot;180&quot; as=&quot;targetPoint&quot;/&gt;&lt;Array as=&quot;points&quot;&gt;&lt;mxPoint x=&quot;-80&quot; y=&quot;251&quot;/&gt;&lt;mxPoint x=&quot;-80&quot; y=&quot;140&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;196&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;fontSize=10;strokeWidth=2;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fillColor=#008a00;strokeColor=#005700;&quot; edge=&quot;1&quot; parent=&quot;117&quot; source=&quot;150&quot;&gt;&lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&lt;mxPoint x=&quot;170&quot; y=&quot;230&quot; as=&quot;sourcePoint&quot;/&gt;&lt;mxPoint x=&quot;50&quot; y=&quot;140&quot; as=&quot;targetPoint&quot;/&gt;&lt;Array as=&quot;points&quot;&gt;&lt;mxPoint x=&quot;50&quot; y=&quot;251&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;197&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;fontSize=10;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#008a00;strokeColor=#005700;&quot; edge=&quot;1&quot; parent=&quot;117&quot; source=&quot;156&quot; target=&quot;9&quot;&gt;&lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&lt;mxPoint x=&quot;390&quot; y=&quot;300&quot; as=&quot;sourcePoint&quot;/&gt;&lt;mxPoint x=&quot;230&quot; y=&quot;140&quot; as=&quot;targetPoint&quot;/&gt;&lt;Array as=&quot;points&quot;&gt;&lt;mxPoint x=&quot;400&quot; y=&quot;249&quot;/&gt;&lt;mxPoint x=&quot;400&quot; y=&quot;140&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;198&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;fontSize=10;strokeWidth=2;fillColor=#008a00;strokeColor=#005700;exitX=1;exitY=0.5;exitDx=0;exitDy=0;&quot; edge=&quot;1&quot; parent=&quot;117&quot; source=&quot;154&quot;&gt;&lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&lt;mxPoint x=&quot;170&quot; y=&quot;230&quot; as=&quot;sourcePoint&quot;/&gt;&lt;mxPoint x=&quot;280&quot; y=&quot;140&quot; as=&quot;targetPoint&quot;/&gt;&lt;Array as=&quot;points&quot;&gt;&lt;mxPoint x=&quot;280&quot; y=&quot;251&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;"><style type="text/css"></style><rect x="0.5" y="0.5" width="540" height="330" rx="49.5" ry="49.5" fill="#bac8d3" stroke="#23445d" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 26px; margin-left: 137px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div><span style="font-size: 18pt ; font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(58 , 54 , 54) ; font-weight: bold">OceanBase数据库集群</span></div></div></div></div></foreignObject></g><rect x="215.5" y="63.5" width="120" height="60" rx="9" ry="9" fill="#60a917" stroke="#2d7600" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 116px; height: 1px; padding-top: 94px; margin-left: 217px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 13px"><span style="font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(255 , 255 , 255) ; font-weight: bold"><font style="font-size: 13px">全局时间戳服务<br /></font></span></div><div style="font-size: 13px"><span style="font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(255 , 255 , 255) ; font-weight: bold"><font style="font-size: 13px">（GTS）<br /></font></span></div><div style="font-size: 13px"><span style="font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(255 , 255 , 255) ; font-weight: bold"><font style="font-size: 13px">For 租户1</font></span></div></div></div></div></foreignObject></g><rect x="215.5" y="143.5" width="120" height="60" rx="9" ry="9" fill="#008a00" stroke="#005700" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 116px; height: 1px; padding-top: 174px; margin-left: 217px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 13px"><span style="font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(255 , 255 , 255) ; font-weight: bold"><font style="font-size: 13px">全局时间戳服务<br /></font></span></div><div style="font-size: 13px"><span style="font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(255 , 255 , 255) ; font-weight: bold"><font style="font-size: 13px">（GTS）<br /></font></span></div><div style="font-size: 13px"><span style="font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(255 , 255 , 255) ; font-weight: bold"><font style="font-size: 13px">For 租户2</font></span></div></div></div></div></foreignObject></g><rect x="80.5" y="223.5" width="60" height="80" rx="9" ry="9" fill="#1ba1e2" stroke="#006eaf" pointer-events="none"/><rect x="304.5" y="223.5" width="60" height="80" rx="9" ry="9" fill="#1ba1e2" stroke="#006eaf" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 234px; margin-left: 321px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 9px"><span style="font-size: 9px ; font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(58 , 54 , 54) ; font-weight: bold">机器1</span></div></div></div></div></foreignObject></g><rect x="188.5" y="223.5" width="60" height="80" rx="9" ry="9" fill="#1ba1e2" stroke="#006eaf" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 234px; margin-left: 205px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 9px"><span style="font-size: 9px ; font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(58 , 54 , 54) ; font-weight: bold">机器1</span></div></div></div></div></foreignObject></g><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 234px; margin-left: 97px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 9px"><span style="font-size: 9px ; font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(58 , 54 , 54) ; font-weight: bold">机器1</span></div></div></div></div></foreignObject></g><rect x="410.5" y="223.5" width="60" height="80" rx="9" ry="9" fill="#1ba1e2" stroke="#006eaf" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 234px; margin-left: 427px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 9px"><span style="font-size: 9px ; font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(58 , 54 , 54) ; font-weight: bold">机器1</span></div></div></div></div></foreignObject></g><rect x="80.5" y="223.5" width="60" height="80" rx="9" ry="9" fill="#1ba1e2" stroke="#006eaf" pointer-events="none"/><rect x="304.5" y="223.5" width="60" height="80" rx="9" ry="9" fill="#1ba1e2" stroke="#006eaf" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 234px; margin-left: 321px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 9px"><span style="font-size: 9px ; font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(58 , 54 , 54) ; font-weight: bold">....</span></div></div></div></div></foreignObject></g><rect x="188.5" y="223.5" width="60" height="80" rx="9" ry="9" fill="#1ba1e2" stroke="#006eaf" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 234px; margin-left: 205px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 9px"><span style="font-size: 9px ; font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(58 , 54 , 54) ; font-weight: bold">机器1</span></div></div></div></div></foreignObject></g><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 234px; margin-left: 97px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 9px"><span style="font-size: 9px ; font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(58 , 54 , 54) ; font-weight: bold">机器1</span></div></div></div></div></foreignObject></g><rect x="410.5" y="223.5" width="60" height="80" rx="9" ry="9" fill="#1ba1e2" stroke="#006eaf" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 234px; margin-left: 427px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 9px"><span style="font-size: 9px ; font-family: &quot;alibabapuhuiti_2_85_bold&quot; ; color: rgb(58 , 54 , 54) ; font-weight: bold">机器1</span></div></div></div></div></foreignObject></g><rect x="90.5" y="243.5" width="40" height="20" rx="3" ry="3" fill="#60a917" stroke="#2d7600" pointer-events="none"/><rect x="90.5" y="273.5" width="40" height="20" rx="3" ry="3" fill="#008a00" stroke="#005700" pointer-events="none"/><rect x="198.5" y="243.5" width="40" height="20" rx="3" ry="3" fill="#60a917" stroke="#2d7600" pointer-events="none"/><rect x="198.5" y="273.5" width="40" height="20" rx="3" ry="3" fill="#008a00" stroke="#005700" pointer-events="none"/><rect x="314.5" y="243.5" width="40" height="20" rx="3" ry="3" fill="#60a917" stroke="#2d7600" pointer-events="none"/><rect x="314.5" y="273.5" width="40" height="20" rx="3" ry="3" fill="#008a00" stroke="#005700" pointer-events="none"/><rect x="420.5" y="243.5" width="40" height="20" rx="3" ry="3" fill="#60a917" stroke="#2d7600" pointer-events="none"/><rect x="420.5" y="273.5" width="40" height="20" rx="3" ry="3" fill="#008a00" stroke="#005700" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 255px; margin-left: 92px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">租户 1</div></div></div></foreignObject></g><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 285px; margin-left: 92px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">租户 2</div></div></div></foreignObject></g><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 255px; margin-left: 200px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">租户 1</div></div></div></foreignObject></g><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 285px; margin-left: 200px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">租户 2</div></div></div></foreignObject></g><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 255px; margin-left: 92px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">租户 1</div></div></div></foreignObject></g><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 285px; margin-left: 316px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">租户 2</div></div></div></foreignObject></g><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 255px; margin-left: 316px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">租户 1</div></div></div></foreignObject></g><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 283px; margin-left: 422px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">租户 2</div></div></div></foreignObject></g><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 253px; margin-left: 422px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">租户 1</div></div></div></foreignObject></g><path d="M 90.5 254.5 L 70.5 254.5 Q 60.5 254.5 60.5 244.5 L 60.5 98.5 Q 60.5 88.5 70.5 88.5 L 207.26 88.5" fill="none" stroke="#2d7600" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 213.26 88.5 L 205.26 92.5 L 207.26 88.5 L 205.26 84.5 Z" fill="#2d7600" stroke="#2d7600" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 198.5 254.5 L 189.5 254.5 Q 180.5 254.5 180.5 244.5 L 180.5 223.5 Q 180.5 213.5 180.5 203.5 L 180.5 179.5 Q 180.5 169.5 180.5 159.5 L 180.5 89.5" fill="none" stroke="#2d7600" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 460.5 252.5 L 480.5 252.5 Q 490.5 252.5 490.5 242.5 L 490.5 98.5 Q 490.5 88.5 480.5 88.5 L 341.24 88.5" fill="none" stroke="#2d7600" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 335.24 88.5 L 343.24 84.5 L 341.24 88.5 L 343.24 92.5 Z" fill="#2d7600" stroke="#2d7600" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 354.5 254.5 L 362.5 255.5 Q 370.5 256.5 370.5 246.5 L 370.5 87.5" fill="none" stroke="#2d7600" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 90.5 284.5 L 40.5 284.5 Q 30.5 284.5 30.5 274.5 L 30.5 183.5 Q 30.5 173.5 40.5 173.5 L 207.26 173.5" fill="none" stroke="#005700" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 213.26 173.5 L 205.26 177.5 L 207.26 173.5 L 205.26 169.5 Z" fill="#005700" stroke="#005700" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 198.5 284.5 L 170.5 284.5 Q 160.5 284.5 160.5 274.5 L 160.5 173.5" fill="none" stroke="#005700" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 460.5 282.5 L 500.5 282.5 Q 510.5 282.5 510.5 272.5 L 510.5 183.5 Q 510.5 173.5 500.5 173.5 L 341.24 173.5" fill="none" stroke="#005700" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 335.24 173.5 L 343.24 169.5 L 341.24 173.5 L 343.24 177.5 Z" fill="#005700" stroke="#005700" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 354.5 284.5 L 380.5 284.5 Q 390.5 284.5 390.5 274.5 L 390.5 173.5" fill="none" stroke="#005700" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/></svg>





#### 2 OceanBase 全局时间戳 
*全局时间戳服务*（Global Timestamp Service，简称 *GTS*），OceanBase 数据库内部每个租户启动一个全局时间戳服务，事务提交时通过本租户的时间戳服务获取事务版本号，保证全局的事务顺序；

ob_timestamp_service ：用于指定使用何种时间戳服；*GTS*(默认)，*LTS*，*HA_GTS*；

##### 2.1 GTS 服务高可用
GTS 是集群的核心，根据租户的级别不同采用不同的方式实现高可用；

`用户租户`：对于用户租户而言，OceanBase 数据库使用租户级别内部表 *\_\_all_dummy* 的 leader 作为 GTS 服务提供者，时间来源于该 leader 的本地时钟。GTS 默认是三副本的，其高可用能力跟普通表的能力一样；

`系统租户`：对于系统租户，使用 *\_\_all_core_table* 的 leader 作为 GTS 服务的提供者，高可用能力与普通表一样；


##### 2.2 时间戳正确性保证
GTS 维护了全局递增的时间戳服务，异常场景下依然能够保证正确性：新 Leader 上任之前先回放原 Leader 写下的预分配区间日志，获取原可分配区间的最大值，作为自己时间戳授权的基准值。因此该场景下，GTS 提供的时间戳不会回退；

GTS 服务使用 Paxos 协议实现高可用，若 GTS 服务异常，则根据 Paxos 协议重新选主；

##### 2.3 GTS 获取优化
*语句快照获取优化*：事务提交的时候都会更新其所在机器的 Global Committed Version，当一条语句可以明确其查询所在机器时，如果是一台机器，则直接使用该机器的 Global Committed Version 作为 Read Version，降低对于全局时间戳的请求压力；

*事务提交版本号获取优化*：多个事务可以合并获取全局时间戳，并且获取时间戳的请求可以提早发送，缩短事务提交时间；



### 参考文档
1. *全局时间戳*：[V3.2.2](https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-10000000000362346)，[V3.2.3](https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-10000000000355160)，[V4.0.0](https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-10000000000885925)，[V4.3.1](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000000819463)，；


